<body class="background-container">
  <div class="container mt-4">
    <div class="row">
      <div class="col">
        <h2 class="text-left mb-4">Gestión de usuarios</h2>
      </div>
      <div class="col-auto">
        <!-- Botón para registrar nuevo empleado -->
        <button type="button" routerLink="/crear-usuario" class="btn btn-custom">Crear usuario</button>
      </div>
    </div>
    <!-- Filtros -->
    <div class="row mb-3">
      <div class="col-md-4">
        <div class="form-group">
          <label for="nombre">Filtrar por Nombre de Usuario:</label>
          <input type="text" class="form-control" id="nombre" [(ngModel)]="filterUsername"
            (ngModelChange)="applyFilters()">
        </div>
      </div>
      <div class="col-md-4">
        <div class="form-group">
          <label for="modulo">Filtrar por Módulo:</label>
          <select class="form-control" id="modulo" [(ngModel)]="filterModule" (ngModelChange)="applyFilters()">
            <option value="">Todos</option>
            <option value="RECLUTAMIENTO">Reclutamiento</option>
            <option value="DESPIDO">Despido</option>
            <option value="NOMINA_ELECTRONICA">Nómina Electrónica</option>
            <option value="SST">SST</option>
            <option value="BI">BI</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Lista de empleados -->
    <div class="row">
      <div class="col-lg-12">
        <table class="table">
          <thead>
            <tr>
              <th>Nombre Completo</th>
              <th>Despido</th>
              <th>Reclutamiento</th>
              <th>Nómina</th>
              <th>SST</th>
              <th>BI</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of filteredUsuarios">
              <td>{{user.firstname}} {{user.lastname}}</td>
              <td>
                <label class="switch">
                  <input type="checkbox" [checked]="user.roles.includes('DESPIDO')"
                    (change)="handleCheckboxChange($event,user.username,'DESPIDO')">
                  <span class="slider round"></span>
                </label>
              </td>
              <td>
                <label class="switch">
                  <input type="checkbox" [checked]="user.roles.includes('RECLUTAMIENTO')"
                    (change)="handleCheckboxChange($event,user.username,'RECLUTAMIENTO')">
                  <span class="slider round"></span>
                </label>
              </td>
              <td>
                <label class="switch">
                  <input type="checkbox" [checked]="user.roles.includes('NOMINA_ELECTRONICA')"
                    (change)="handleCheckboxChange($event,user.username,'NOMINA_ELECTRONICA')">
                  <span class="slider round"></span>
                </label>
              </td>
              <td>
                <label class="switch">
                  <input type="checkbox" [checked]="user.roles.includes('SST')"
                    (change)="handleCheckboxChange($event,user.username,'SST')">
                  <span class="slider round"></span>
                </label>
              </td>
              <td>
                <label class="switch">
                  <input type="checkbox" [checked]="user.roles.includes('BI')"
                    (change)="handleCheckboxChange($event,user.username,'BI')">
                  <span class="slider round"></span>
                </label>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>